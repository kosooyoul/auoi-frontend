<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8">
<title>Board Test</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
<meta name="apple-mobile-web-app-capable" content="yes"/>
<link rel="stylesheet" href="./css/hanulse-board.css?v=20230722"/>
<style>
html, body {
	margin: 0px;
}
.app {
	display: grid;
	grid-template-rows: 52px auto 52px;
	position: relative;
	width: 400px;
	height: 600px;
	overflow: hidden;
	box-shadow: 8px 8px 24px 0px rgba(0, 0, 0, 0.4);
}
.head {
	display: grid;
	grid-template-columns: 100px auto 100px;
	position: relative;
	width: 100%;
	background: linear-gradient(0deg, #4e92a2, #1e758f, #459dad);
}
.head>.left {
	display: flex;
	justify-content: flex-start;
    align-items: center;
	padding-left: 20px;
	font-size: 14px;
	font-weight: bold;
	color: white;
}
.head>.title {
	display: flex;
	justify-content: center;
    align-items: center;
	font-size: 16px;
	font-weight: bold;
	color: white;
}
.head>.right {
	display: flex;
	justify-content: flex-end;
    align-items: center;
	padding-right: 20px;
	font-size: 14px;
	font-weight: bold;
	color: white;
}

.content {
	position: relative;
	overflow: hidden;
}
.content>.board {
	overflow: hidden;
	z-index: 0;
}
.content>.overlay {
	display: none;
	position: absolute;
	left: 0px;
	right: 0px;
	height: 40%;
	max-height: 200px;
	left: 0px;
	bottom: 0px;
	padding: 12px;
	border-radius: 8px 8px 0px 0px;
	background-color: rgba(255, 255, 255, 0.8);
	box-shadow: 0px 0px 4px 0px rgba(0, 0, 0, 0.4);
	overflow-x: hidden;
	overflow-y: auto;
	z-index: 1;
}
.overlay::-webkit-scrollbar { height: 2px; width: 2px; }
.overlay::-webkit-scrollbar-thumb { background: black; border-radius: 2px; }

.content>.overlay.visibled {
	display: block;
	opacity: 1;
}

.foot {
	display: flex;
	justify-content: center;
    align-items: stretch;
	position: relative;
	background-color: black;
}
.foot>* {
	display: flex;
	justify-content: center;
    align-items: center;
	width: 60px;
	font-size: 14px;
	font-weight: bold;
	color: white;
}

.items>.item {
	display: inline-block;
	position: relative;
	width: 38px;
	height: 38px;
	padding: 2px;
	margin: 4px;
	border-radius: 40px;
	background-color: white;
	box-shadow: 1px 1px 2px 0px rgba(0, 0, 0, 0.4);
	cursor: pointer;
}
.items>.item:hover {
	background-color: cyan;
}
.items>.item.member-only::after {
	display: block;
	position: absolute;
	width: 20px;
	left: 20px;
	bottom: 2px;
	padding: 0px 4px;
	content: "회원";
	font-size: 10px;
	border-radius: 4px;
	background-color: greenyellow;
	box-shadow: 1px 1px 2px 0px rgba(0, 0, 0, 0.4);
}
.items>.item>.content {
	width: 100%;
	height: 100%;
	border-radius: 100%;
	box-shadow: 0px 0px 2px 0px rgba(0, 0, 0, 0.4);
	overflow: hidden;
}
</style>
<script>
var SampleBackgroundItems = [
	{ id: 10002, type: "color", value: "white" },
	{ id: 10003, type: "color", value: "black" },
	{ id: 10004, type: "color", value: "#ffc800" },
	{ id: 10005, type: "color", value: "#c8ff00" },
	{ id: 10006, type: "color", value: "#00c8ff" },
	{ id: 10007, type: "color", value: "#ff0064" },
	{ id: 10008, type: "color", value: "#c800ff" },
	{ id: 10009, type: "color", value: "gray", memberOnly: true },
	{ id: 10010, type: "color", value: "brown", memberOnly: true },
	{ id: 10011, type: "color", value: "burlywood", memberOnly: true },
	{ id: 10012, type: "image", width: 69, height: 35, value: "./images/grass-top.png", memberOnly: true },
	{ id: 10013, type: "image", width: 69, height: 35, value: "./images/pink-top.png", memberOnly: true },
	{ id: 10014, type: "image", width: 69, height: 35, value: "./images/blue-top.png", memberOnly: true },
	{ id: 10015, type: "image", width: 69, height: 35, value: "./images/soil-top.png", memberOnly: true },
	{ id: 10016, type: "image", width: 69, height: 35, value: "./images/snow-top.png", memberOnly: true },
	{ id: 10017, type: "image", width: 69, height: 35, value: "./images/hologram-top.png", memberOnly: true },
	{ id: 10018, type: "image", width: 69, height: 35, value: "./images/parquet-top.png", memberOnly: true },
	{ id: 10019, type: "image", width: 69, height: 35, value: "./images/iron-top.png	", memberOnly: true },
	{ id: 10020, type: "pattern", width: 69, height: 35, value: "./images/grass-top.png" },
	{ id: 10021, type: "pattern", width: 69, height: 35, value: "./images/pink-top.png" },
	{ id: 10022, type: "pattern", width: 69, height: 35, value: "./images/blue-top.png" },
	{ id: 10023, type: "pattern", width: 69, height: 35, value: "./images/soil-top.png" },
	{ id: 10024, type: "pattern", width: 69, height: 35, value: "./images/snow-top.png" },
	{ id: 10025, type: "pattern", width: 69, height: 35, value: "./images/hologram-top.png" },
	{ id: 10026, type: "pattern", width: 69, height: 35, value: "./images/parquet-top.png" },
	{ id: 10027, type: "pattern", width: 69, height: 35, value: "./images/iron-top.png" },
];

var SampleFaceItems = [
	{ id: 20001, type: "image", width: 64, height: 64, value: "./images/sample/face/6955235_casper_ghost_halloween_phantom_icon.png" },
	{ id: 20002, type: "image", width: 64, height: 64, value: "./images/sample/face/1679538_elf_emoji_emoticon_happy_smile_icon.png", memberOnly: true },
	{ id: 20003, type: "image", width: 64, height: 64, value: "./images/sample/face/1679555_emoji_emoticon_happy_santa_smile_icon.png", memberOnly: true },
	{ id: 20004, type: "image", width: 64, height: 64, value: "./images/sample/face/1679569_deer_emoji_emoticon_happy_reindeer_icon.png", memberOnly: true },
	{ id: 20005, type: "image", width: 64, height: 64, value: "./images/sample/face/1679609_emoji_emoticon_man_smile_smiley_icon.png", memberOnly: true },
	{ id: 20006, type: "image", width: 64, height: 64, value: "./images/sample/face/2291007_dead_face_halloween_smiley_undead_icon.png", memberOnly: true },
	{ id: 20007, type: "image", width: 64, height: 64, value: "./images/sample/face/4927756_emoji_face_poo_shit_icon.png", memberOnly: true },
	{ id: 20008, type: "image", width: 64, height: 64, value: "./images/sample/face/5627745_avatar_face_female_people_profile_icon.png", memberOnly: true },
	{ id: 20009, type: "image", width: 64, height: 64, value: "./images/sample/face/7536533_avatar_face_girl_female_woman_icon.png", memberOnly: true },
	{ id: 20010, type: "image", width: 64, height: 64, value: "./images/sample/face/7536534_avatar_face_girl_female_woman_icon.png", memberOnly: true },
	{ id: 20011, type: "image", width: 64, height: 64, value: "./images/sample/face/7536535_avatar_face_girl_female_woman_icon.png", memberOnly: true },
	{ id: 20012, type: "image", width: 64, height: 64, value: "./images/sample/face/7536536_avatar_face_man_boy_male_icon.png", memberOnly: true },
	{ id: 20013, type: "image", width: 64, height: 64, value: "./images/sample/face/7536537_avatar_face_girl_female_woman_icon.png", memberOnly: true },
	{ id: 20014, type: "image", width: 64, height: 64, value: "./images/sample/face/7536538_avatar_face_man_boy_male_icon.png", memberOnly: true },
	{ id: 20015, type: "image", width: 64, height: 64, value: "./images/sample/face/7536539_avatar_face_man_boy_male_icon.png", memberOnly: true },
	{ id: 20016, type: "image", width: 64, height: 64, value: "./images/sample/face/7536540_avatar_face_man_boy_male_icon.png", memberOnly: true },
	{ id: 20017, type: "image", width: 64, height: 64, value: "./images/sample/face/7536541_avatar_face_male_profile_smiley_icon.png", memberOnly: true },
	{ id: 20018, type: "image", width: 64, height: 64, value: "./images/sample/face/7536542_avatar_face_man_boy_male_icon.png", memberOnly: true },
];

var SampleStickerItems = [
	{ id: 30001, type: "image", width: 64, height: 64, value: "./images/sample/sticker/1679536_animal_deer_forest_happy_reindeer_icon.png" },
	{ id: 30002, type: "image", width: 64, height: 64, value: "./images/sample/sticker/1679538_elf_emoji_emoticon_happy_smile_icon.png" },
	{ id: 30003, type: "image", width: 64, height: 64, value: "./images/sample/sticker/1679542_wand_tool_magic_design_christmas_icon.png" },
	{ id: 30004, type: "image", width: 64, height: 64, value: "./images/sample/sticker/1679543_candy_dessert_sweet_sweets_wrapper_icon.png" },
	{ id: 30005, type: "image", width: 64, height: 64, value: "./images/sample/sticker/1679550_christmas_clothes_clothing_fashion_sock_icon.png" },
	{ id: 30006, type: "image", width: 64, height: 64, value: "./images/sample/sticker/1679555_emoji_emoticon_happy_santa_smile_icon.png" },
	{ id: 30007, type: "image", width: 64, height: 64, value: "./images/sample/sticker/1679556_elf_happy_helper_person_santa_icon.png" },
	{ id: 30008, type: "image", width: 64, height: 64, value: "./images/sample/sticker/1679562_child_santa_toy_game_santa claus_icon.png", memberOnly: true },
	{ id: 30009, type: "image", width: 64, height: 64, value: "./images/sample/sticker/1679566_christmas_cookie_dessert_gingerbread_man_icon.png" },
	{ id: 30010, type: "image", width: 64, height: 64, value: "./images/sample/sticker/1679567_clothes_clothing_cold_fashion_glove_icon.png" },
	{ id: 30011, type: "image", width: 64, height: 64, value: "./images/sample/sticker/1679569_deer_emoji_emoticon_happy_reindeer_icon.png" },
	{ id: 30012, type: "image", width: 64, height: 64, value: "./images/sample/sticker/1679573_bow_candy_cane_ribbon_sweets_icon.png", memberOnly: true },
	{ id: 30013, type: "image", width: 64, height: 64, value: "./images/sample/sticker/1679579_angel_christmas_decorate_decoration_wings_icon.png" },
	{ id: 30014, type: "image", width: 64, height: 64, value: "./images/sample/sticker/1679605_candle_decor_decoration_fire_flame_icon.png" },
	{ id: 30015, type: "image", width: 64, height: 64, value: "./images/sample/sticker/1679609_emoji_emoticon_man_smile_smiley_icon.png" },
	{ id: 30016, type: "image", width: 64, height: 64, value: "./images/sample/sticker/1679614_bright_christmas_decorate_decoration_favourite_icon.png" },
	{ id: 30017, type: "image", width: 64, height: 64, value: "./images/sample/sticker/1679639_bow_box_gift_package_present_icon.png" },
	{ id: 30018, type: "image", width: 64, height: 64, value: "./images/sample/sticker/1679653_christmas_ice_snow_cold_snowflake_icon.png" },
	{ id: 30019, type: "image", width: 64, height: 64, value: "./images/sample/sticker/2291007_dead_face_halloween_smiley_undead_icon.png" },
	{ id: 30020, type: "image", width: 64, height: 64, value: "./images/sample/sticker/4927756_emoji_face_poo_shit_icon.png" },
	{ id: 30021, type: "image", width: 64, height: 64, value: "./images/sample/sticker/5627745_avatar_face_female_people_profile_icon.png" },
	{ id: 30022, type: "image", width: 64, height: 64, value: "./images/sample/sticker/5928555_clean_hand_hygiene_soap_wash_icon.png" },
	{ id: 30023, type: "image", width: 64, height: 64, value: "./images/sample/sticker/7536533_avatar_face_girl_female_woman_icon.png", memberOnly: true },
	{ id: 30024, type: "image", width: 64, height: 64, value: "./images/sample/sticker/7536534_avatar_face_girl_female_woman_icon.png", memberOnly: true },
	{ id: 30025, type: "image", width: 64, height: 64, value: "./images/sample/sticker/7536535_avatar_face_girl_female_woman_icon.png", memberOnly: true },
	{ id: 30026, type: "image", width: 64, height: 64, value: "./images/sample/sticker/7536536_avatar_face_man_boy_male_icon.png" },
	{ id: 30027, type: "image", width: 64, height: 64, value: "./images/sample/sticker/7536537_avatar_face_girl_female_woman_icon.png" },
	{ id: 30028, type: "image", width: 64, height: 64, value: "./images/sample/sticker/7536538_avatar_face_man_boy_male_icon.png" },
	{ id: 30029, type: "image", width: 64, height: 64, value: "./images/sample/sticker/7536539_avatar_face_man_boy_male_icon.png" },
	{ id: 30030, type: "image", width: 64, height: 64, value: "./images/sample/sticker/7536540_avatar_face_man_boy_male_icon.png" },
	{ id: 30031, type: "image", width: 64, height: 64, value: "./images/sample/sticker/7536541_avatar_face_male_profile_smiley_icon.png" },
	{ id: 30032, type: "image", width: 64, height: 64, value: "./images/sample/sticker/7536542_avatar_face_man_boy_male_icon.png" },
];
</script>
</head>

<body>

<div class="app">
	<div class="head">
		<div class="left">뒤로</div>
		<div class="title">카드 만들기</div>
		<div class="right" style="cursor: pointer;" onclick="saveBoardImage()">저장</div>
	</div>
	<div class="content">
		<div class="board" style="width: 100%; height: 100%;"></div>
		<div id="image-list" class="overlay">
			<div class="items"></div>
		</div>
		<div id="text-editor" class="overlay">
			<div><input class="text-input" type="text" placeholder="문구를 입력하세요"></div>
			<div><input type="button" value="확인" onclick="createText()"></div>
		</div>
	</div>
	<div class="foot">
		<div onclick="showBackgroundList()">배경</div>
		<div onclick="showFaceList()">얼굴</div>
		<div onclick="showStickerList()">스티커</div>
		<div onclick="showTextEditor()">문구</div>
		<div>그리기</div>
		<!-- <input id="add-image-button" type="button" value="이미지 추가" style="height: 28px;"> -->
		<!-- <input id="add-text-button" type="button" value="텍스트 추가" style="height: 28px;"> -->
	</div>
</div>
<script type="text/javascript" src="./libs/jquery-3.6.0.min.js"></script>
<script type="text/javascript" src="./js/view/board/HanulseBoardView.js"></script>
<script>
$(document.body).ready(() => {
	var boardView = new HanulseBoardView($(".board"));

	$("#add-image-button").click(() => boardView.createItem("image", 52, 60));
	$("#add-text-button").click(() => boardView.createItem("text", 100, 20));

	$(".content").on("mousedown", (event) => {
		var $target = $(event.target);
		if ($target.hasClass('overlay')) {
			return;
		}

		var $overlay = $target.parents(".overlay");
		if ($overlay.length == 0) {
			window.hideOverlay();
		}
	});

	$(".content").on("touchstart", (event) => {
		var $target = $(event.target);
		if ($target.hasClass('overlay')) {
			return;
		}

		var $overlay = $target.parents(".overlay");
		if ($overlay.length == 0) {
			window.hideOverlay();
		}
	});

	var createBackgroundItemElement = (item) => {
		var $e = $("<div class=\"item\"> data-item-id=\"" + item.id + "\"");
		var $content = $("<div class=\"content\">");
		
		if (item.type == "color") {
			$content.css({ backgroundColor: item.value });
			$e.click(() => boardView.setBackground(item));
		} else if (item.type == "pattern") {
			$content.css({
				backgroundImage: "url(\"" + item.value + "\")",
				backgroundPosition: "50%",
				backgroundSize: "120%",
			});
			$e.click(() => boardView.setBackground(item));
		} else if (item.type == "image") {
			$content.css({
				backgroundImage: "url(\"" + item.value + "\")",
				backgroundPosition: "50%",
				backgroundSize: "120%",
			});
			$e.click(() => boardView.setBackground(item));
		}

		if (item.memberOnly) {
			$e.addClass("member-only");
		}

		$e.append($content);

		return $e;
	};

	var createStickerItemElement = (item) => {
		var $e = $("<div class=\"item\"> data-item-id=\"" + item.id + "\"");
		var $content = $("<div class=\"content\">");
		
		if (item.type == "image") {
			$content.css({
				backgroundImage: "url(\"" + item.value + "\")",
				backgroundPosition: "50%",
				backgroundSize: "120%",
			});
			$e.click(() => boardView.createItem(item));
		}

		if (item.memberOnly) {
			$e.addClass("member-only");
		}

		$e.append($content);

		return $e;
	};

	window.hideOverlay = () => {
		$(".content>.overlay").removeClass("visibled");
	};
	window.saveBoardImage = () => {
		boardView.saveImage();
	};
	window.showBackgroundList = () => {
		var $items = $("#image-list.overlay .items");
		$items.empty();
		SampleBackgroundItems.forEach(item => {
			var $item = createBackgroundItemElement(item);
			$items.append($item);
		});
		window.hideOverlay();
		$("#image-list.overlay").addClass("visibled");
	};
	window.showFaceList = () => {
		var $items = $("#image-list.overlay .items");
		$items.empty();
		SampleFaceItems.forEach(item => {
			var $item = createStickerItemElement(item);
			$items.append($item);
		});
		window.hideOverlay();
		$("#image-list.overlay").addClass("visibled");
	};
	window.showStickerList = () => {
		var $items = $("#image-list.overlay .items");
		$items.empty();
		SampleStickerItems.forEach(item => {
			var $item = createStickerItemElement(item);
			$items.append($item);
		});
		window.hideOverlay();
		$("#image-list.overlay").addClass("visibled");
	};
	window.showTextEditor = () => {
		window.hideOverlay();
		$("#text-editor.overlay").addClass("visibled");
	};
	window.createText = () => {
		var text = $("#text-editor .text-input").val();
		if (text == null || text.length == 0) {
			return;
		}

		boardView.createItem({
			type: "text",
			value: text,
		});
	};
});
</script>
</body>
</html>
